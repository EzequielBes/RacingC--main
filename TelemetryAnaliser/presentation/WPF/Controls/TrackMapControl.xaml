<UserControl x:Class="TelemetryAnalyzer.Presentation.WPF.Controls.TrackMapControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             Background="#FF1E1E1E">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header with track info -->
        <Border Grid.Row="0" Background="#FF2D2D30" CornerRadius="4,4,0,0" Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Name="TrackNameText" Text="Track Map" 
                               Foreground="White" FontWeight="SemiBold" FontSize="14"/>
                    <TextBlock Name="TrackLengthText" Text="" 
                               Foreground="#FFAAAAAA" FontSize="12" Margin="12,0,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Name="ZoomInButton" Content="ðŸ”+" Width="32" Height="24" 
                            Background="Transparent" BorderThickness="0" Foreground="White"
                            Click="ZoomInButton_Click"/>
                    <Button Name="ZoomOutButton" Content="ðŸ”-" Width="32" Height="24" 
                            Background="Transparent" BorderThickness="0" Foreground="White"
                            Click="ZoomOutButton_Click"/>
                    <Button Name="FitToScreenButton" Content="âš" Width="32" Height="24" 
                            Background="Transparent" BorderThickness="0" Foreground="White"
                            Click="FitToScreenButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Track Map Canvas -->
        <Border Grid.Row="1" Background="#FF1A1A1A" CornerRadius="0,0,4,4">
            <ScrollViewer Name="MapScrollViewer" 
                          ZoomMode="Enabled" 
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto"
                          Background="Transparent">
                <Canvas Name="TrackCanvas" 
                        Background="Transparent"
                        Width="800" Height="600"
                        MouseMove="TrackCanvas_MouseMove"
                        MouseLeave="TrackCanvas_MouseLeave">
                    
                    <!-- Track outline will be drawn here -->
                    <!-- Car positions will be shown here -->
                    <!-- Sector markers will be displayed here -->
                    
                </Canvas>
            </ScrollViewer>
        </Border>

        <!-- Tooltip for track information -->
        <Popup Name="TrackTooltip" Placement="Mouse" StaysOpen="False">
            <Border Background="#FF2D2D30" BorderBrush="#FF404040" BorderThickness="1" 
                    CornerRadius="4" Padding="8">
                <StackPanel>
                    <TextBlock Name="TooltipTitle" Foreground="White" FontWeight="Bold"/>
                    <TextBlock Name="TooltipContent" Foreground="#FFCCCCCC" FontSize="11"/>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</UserControl>